

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Discussion Forums Data &mdash; edX Data 0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="edX Data 0.1 documentation" href="../index.html" />
    <link rel="next" title="Tracking Logs" href="tracking_logs.html" />
    <link rel="prev" title="Student Info and Progress Data" href="sql_schema.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tracking_logs.html" title="Tracking Logs"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="sql_schema.html" title="Student Info and Progress Data"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">edX Data 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Discussion Forums Data</a><ul>
<li><a class="reference internal" href="#shared-attributes">Shared Attributes</a><ul>
<li><a class="reference internal" href="#id"><cite>_id</cite></a></li>
<li><a class="reference internal" href="#type"><cite>_type</cite></a></li>
<li><a class="reference internal" href="#anonymous"><cite>anonymous</cite></a></li>
<li><a class="reference internal" href="#anonymous-to-peers"><cite>anonymous_to_peers</cite></a></li>
<li><a class="reference internal" href="#at-position-list"><cite>at_position_list</cite></a></li>
<li><a class="reference internal" href="#author-id"><cite>author_id</cite></a></li>
<li><a class="reference internal" href="#body"><cite>body</cite></a></li>
<li><a class="reference internal" href="#course-id"><cite>course_id</cite></a></li>
<li><a class="reference internal" href="#created-at"><cite>created_at</cite></a></li>
<li><a class="reference internal" href="#updated-at"><cite>updated_at</cite></a></li>
<li><a class="reference internal" href="#votes"><cite>votes</cite></a></li>
</ul>
</li>
<li><a class="reference internal" href="#commentthread">CommentThread</a><ul>
<li><a class="reference internal" href="#closed"><cite>closed</cite></a></li>
<li><a class="reference internal" href="#comment-count"><cite>comment_count</cite></a></li>
<li><a class="reference internal" href="#commentable-id"><cite>commentable_id</cite></a></li>
<li><a class="reference internal" href="#last-activity-at"><cite>last_activity_at</cite></a></li>
<li><a class="reference internal" href="#tags-array"><cite>tags_array</cite></a></li>
<li><a class="reference internal" href="#title"><cite>title</cite></a></li>
</ul>
</li>
<li><a class="reference internal" href="#comment">Comment</a><ul>
<li><a class="reference internal" href="#endorsed"><cite>endorsed</cite></a></li>
<li><a class="reference internal" href="#comment-thread-id"><cite>comment_thread_id</cite></a></li>
<li><a class="reference internal" href="#parent-id"><cite>parent_id</cite></a></li>
<li><a class="reference internal" href="#parent-ids"><cite>parent_ids</cite></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="sql_schema.html"
                        title="previous chapter">Student Info and Progress Data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tracking_logs.html"
                        title="next chapter">Tracking Logs</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/internal_data_formats/discussion_data.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="discussion-forums-data">
<h1>Discussion Forums Data<a class="headerlink" href="#discussion-forums-data" title="Permalink to this headline">¶</a></h1>
<p>Discussions in edX are stored in a MongoDB database as collections of JSON documents.</p>
<p>The primary collection holding all posts and comments written by users is <cite>contents</cite>. There are two types of objects stored here, though they share much of the same structure. A <cite>CommentThread</cite> represents a comment that opens a new thread &#8211; usually a student question of some sort. A <cite>Comment</cite> is a reply in the conversation started by a <cite>CommentThread</cite>.</p>
<div class="section" id="shared-attributes">
<h2>Shared Attributes<a class="headerlink" href="#shared-attributes" title="Permalink to this headline">¶</a></h2>
<p>The attributes that <cite>Comment</cite> and <cite>CommentThread</cite> objects share are listed below.</p>
<div class="section" id="id">
<h3><cite>_id</cite><a class="headerlink" href="#id" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The 12-byte MongoDB unique ID for this collection. Like all MongoDB IDs, they are monotonically increasing and the first four bytes are a timestamp.</div></blockquote>
</div>
<div class="section" id="type">
<h3><cite>_type</cite><a class="headerlink" href="#type" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><cite>CommentThread</cite> or <cite>Comment</cite> depending on the type of object.</div></blockquote>
</div>
<div class="section" id="anonymous">
<h3><cite>anonymous</cite><a class="headerlink" href="#anonymous" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>If true, this <cite>Comment</cite> or <cite>CommentThread</cite> will show up as written by anonymous, even to those who have moderator privileges in the forums.</div></blockquote>
</div>
<div class="section" id="anonymous-to-peers">
<h3><cite>anonymous_to_peers</cite><a class="headerlink" href="#anonymous-to-peers" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The idea behind this field was that <cite>anonymous_to_peers = true</cite> would make the the comment appear anonymous to your fellow students, but would allow the course staff to see who you were. However, that was never implemented in the UI, and only <cite>anonymous</cite> is actually used. The <cite>anonymous_to_peers</cite> field is always false.</div></blockquote>
</div>
<div class="section" id="at-position-list">
<h3><cite>at_position_list</cite><a class="headerlink" href="#at-position-list" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>No longer used. Child comments (replies) are just sorted by their <cite>created_at</cite> timestamp instead.</div></blockquote>
</div>
<div class="section" id="author-id">
<h3><cite>author_id</cite><a class="headerlink" href="#author-id" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The user who wrote this. Corresponds to the user IDs we store in our MySQL database as <cite>auth_user.id</cite></div></blockquote>
</div>
<div class="section" id="body">
<h3><cite>body</cite><a class="headerlink" href="#body" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Text of the comment in Markdown. UTF-8 encoded.</div></blockquote>
</div>
<div class="section" id="course-id">
<h3><cite>course_id</cite><a class="headerlink" href="#course-id" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The full course_id of the course that this comment was made in, including org and run. This value can be seen in the URL when browsing the courseware section. Example: <cite>BerkeleyX/Stat2.1x/2013_Spring</cite></div></blockquote>
</div>
<div class="section" id="created-at">
<h3><cite>created_at</cite><a class="headerlink" href="#created-at" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Timestamp in UTC. Example: <cite>ISODate(&#8220;2013-02-21T03:03:04.587Z&#8221;)</cite></div></blockquote>
</div>
<div class="section" id="updated-at">
<h3><cite>updated_at</cite><a class="headerlink" href="#updated-at" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Timestamp in UTC. Example: <cite>ISODate(&#8220;2013-02-21T03:03:04.587Z&#8221;)</cite></div></blockquote>
</div>
<div class="section" id="votes">
<h3><cite>votes</cite><a class="headerlink" href="#votes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Both <cite>CommentThread</cite> and <cite>Comment</cite> objects support voting. <cite>Comment</cite> objects that are replies to other comments still have this attribute, even though there is no way to actually vote on them in the UI. This attribute is a dictionary that has the following inside:</div></blockquote>
<ul class="simple">
<li><cite>up</cite> = list of User IDs that up-voted this comment or thread.</li>
<li><cite>down</cite> = list of User IDs that down-voted this comment or thread (no longer used).</li>
<li><cite>up_count</cite> = total upvotes received.</li>
<li><cite>down_count</cite> = total downvotes received (no longer used).</li>
<li><cite>count</cite> = total votes cast.</li>
<li><cite>point</cite> = net vote, now always equal to <cite>up_count</cite>.</li>
</ul>
<p>A user only has one vote per <cite>Comment</cite> or <cite>CommentThread</cite>. Though it&#8217;s still written to the database, the UI no longer displays an option to downvote anything.</p>
</div>
</div>
<div class="section" id="commentthread">
<h2>CommentThread<a class="headerlink" href="#commentthread" title="Permalink to this headline">¶</a></h2>
<p>The following fields are specific to <cite>CommentThread</cite> objects. Each thread in the forums is represented by one <cite>CommentThread</cite>.</p>
<div class="section" id="closed">
<h3><cite>closed</cite><a class="headerlink" href="#closed" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>If true, this thread was closed by a forum moderator/admin.</div></blockquote>
</div>
<div class="section" id="comment-count">
<h3><cite>comment_count</cite><a class="headerlink" href="#comment-count" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The number of comment replies in this thread. This includes all replies to replies, but does not include the original comment that started the thread. So if we had:</p>
<div class="highlight-python"><pre>CommentThread: "What's a good breakfast?"
  * Comment: "Just eat cereal!"
  * Comment: "Try a Loco Moco, it's amazing!"
    * Comment: "A Loco Moco? Only if you want a heart attack!"
    * Comment: "But it's worth it! Just get a spam musubi on the side."</pre>
</div>
<p>In that exchange, the <cite>comment_count</cite> for the <cite>CommentThread</cite> is <cite>4</cite>.</p>
</div></blockquote>
</div>
<div class="section" id="commentable-id">
<h3><cite>commentable_id</cite><a class="headerlink" href="#commentable-id" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>We can attach a discussion to any piece of content in the course, or to top level categories like &#8220;General&#8221; and &#8220;Troubleshooting&#8221;. When the <cite>commentable_id</cite> is a high level category, it&#8217;s specified in the course&#8217;s policy file. When it&#8217;s a specific content piece (e.g. <cite>600x_l5_p8</cite>, meaning 6.00x, Lecture Sequence 5, Problem 8), it&#8217;s taken from a discussion module in the course.</div></blockquote>
</div>
<div class="section" id="last-activity-at">
<h3><cite>last_activity_at</cite><a class="headerlink" href="#last-activity-at" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Timestamp in UTC indicating the last time there was activity in the thread (new posts, edits, etc). Closing the thread does not affect the value in this field.</div></blockquote>
</div>
<div class="section" id="tags-array">
<h3><cite>tags_array</cite><a class="headerlink" href="#tags-array" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Meant to be a list of tags that were user definable, but no longer used.</div></blockquote>
</div>
<div class="section" id="title">
<h3><cite>title</cite><a class="headerlink" href="#title" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Title of the thread, UTF-8 string.</div></blockquote>
</div>
</div>
<div class="section" id="comment">
<h2>Comment<a class="headerlink" href="#comment" title="Permalink to this headline">¶</a></h2>
<p>The following fields are specific to <cite>Comment</cite> objects. A <cite>Comment</cite> is a reply to a <cite>CommentThread</cite> (so an answer to the question), or a reply to another <cite>Comment</cite> (a comment about somebody&#8217;s answer). It used to be the case that <cite>Comment</cite> replies could nest much more deeply, but we later capped it at just these three levels (question, answer, comment) much in the way that StackOverflow does.</p>
<div class="section" id="endorsed">
<h3><cite>endorsed</cite><a class="headerlink" href="#endorsed" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Boolean value, true if a forum moderator or instructor has marked that this <cite>Comment</cite> is a correct answer for whatever question the thread was asking. Exists for <cite>Comments</cite> that are replies to other <cite>Comments</cite>, but in that case <cite>endorsed</cite> is always false because there&#8217;s no way to endorse such comments through the UI.</div></blockquote>
</div>
<div class="section" id="comment-thread-id">
<h3><cite>comment_thread_id</cite><a class="headerlink" href="#comment-thread-id" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>What <cite>CommentThread</cite> are we a part of? All <cite>Comment</cite> objects have this.</div></blockquote>
</div>
<div class="section" id="parent-id">
<h3><cite>parent_id</cite><a class="headerlink" href="#parent-id" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The <cite>parent_id</cite> is the <cite>_id</cite> of the <cite>Comment</cite> that this comment was made in reply to. Note that this only occurs in a <cite>Comment</cite> that is a reply to another <cite>Comment</cite>; it does not appear in a <cite>Comment</cite> that is a reply to a <cite>CommentThread</cite>.</div></blockquote>
</div>
<div class="section" id="parent-ids">
<h3><cite>parent_ids</cite><a class="headerlink" href="#parent-ids" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The <cite>parent_ids</cite> attribute appears in all <cite>Comment</cite> objects, and contains the <cite>_id</cite> of all ancestor comments. Since the UI now prevents comments from being nested more than one layer deep, it will only ever have at most one element in it. If a <cite>Comment</cite> has no parent, it&#8217;s an empty list.</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tracking_logs.html" title="Tracking Logs"
             >next</a> |</li>
        <li class="right" >
          <a href="sql_schema.html" title="Student Info and Progress Data"
             >previous</a> |</li>
        <li><a href="../index.html">edX Data 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, edX Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>