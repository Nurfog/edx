<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://www.talentsprint.com/misc/attendance.css">
   <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script> 
  
</head>
<body class="fintech_table">
<!-- Button trigger modal -->

        <div class="table-responsive">
          <table class="table table-bordered" style="border-collapse:collapse;">
            <thead>
                <tr>
                    <th class="theader">Course</th>
                    <th class="theader"># Sessions</th>
                    <th class="theader"># Sessions Attended</th>
                    <th class="theader">% Attendance</th>
                </tr>
            </thead>
            <tbody>
            {% for course in user_attendance %}
                <tr data-toggle="collapse" data-target="#{{course.name}}" class="accordion-toggle">
                    <td>{{course.name}}</td>
                    <td>{{course.noOfSessions}}</td>
                    <td>{{course.present}}</td>
                    <td>{{course.attendancePercentage}}</td>
                </tr>
                <tr >
                    <td colspan="4" class="hiddenRow">
                      <div class="accordian-body collapse" id="{{course.name}}"> 
                          <div class="table-responsive">
                             <table class="table inner_table table-bordered">
                              <tr class="theader1">
                               
                                  <th>Session</th>
                                  <th>Date</th>
                                  <th>Status</th>
                                </tr>
                              {% for session in course.sessions %}
                                 <tr>
                                  <td>{{session.session}}</td>
                                  
                                  <td>{{session.date}}</td>
                                  <td>{{session.status}}</td>
                                 </tr>
                              {% endfor %}

                              </table>
                            </div>
                     </div> 
                   </td>
                </tr>
           {% endfor %}
                          
            </tbody>
        </table>

      </div>

  
<script type="text/javascript">
$(document).ready(function() {
  $( ".accordian-body" ).each(function() {
    $.fn.test = function() {
          return this.each(function(){
                        var new_id = $(this).attr("id").replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "_").replace(/ /g, '');
		$(this).attr('id',   ""  + new_id);
            $(this).closest("tr").prev().attr('data-target',   "#" + new_id);
          });
        };
    $(this).test()
  });
  $('.accordian-body').on('show.bs.collapse', function () {
    $(this).toggleClass('bgcolor').closest("table")
        .find(".collapse.in")
        .not(this)
        .collapse('toggle');
    $(".accordion-toggle").removeClass("visible_now");
    $(this).closest("tr").prev().addClass("visible_now");
   });
  $('.accordian-body').on('hide.bs.collapse', function () {
    $(this).closest("tr").prev().removeClass("visible_now");
   })
});
</script>
</script>

</body>
</html>
