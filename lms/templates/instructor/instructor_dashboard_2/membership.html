<%! from django.utils.translation import ugettext as _ %>
<%page args="section_data"/>

<script type="text/template" id="member-list-widget-template">
  <div class="member-list-widget">
    <div class="header">
      <div class="title"> {{title}} </div>
    </div>
    <div class="info"> {{info}} </div>
    <div class="member-list">
      <table>
        <thead>
          <tr>
            {{#labels}}
              <td class="label">{{.}}</td>
            {{/labels}}
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="bottom-bar">
      <input type="text" name="add-field" class="add-field" placeholder="{{add_placeholder}}">
      <input type="button" name="add" class="add" value="{{add_btn_label}}">
    </div>
  </div>
</script>

<div class="batch-enrollment membership-section">
  <h2> ${_("Batch Enrollment")} </h2>
  <p>
    <label for="student-ids">
      ${_("Enter email addresses and/or usernames separated by new lines or commas.")}
      ${_("You will not get notification for emails that bounce, so please double-check spelling.")} </label>
    <textarea rows="6" name="student-ids" placeholder="${_("Email Addresses/Usernames")}" spellcheck="false"></textarea>
  </p>

  <div class="enroll-option">
    <input type="checkbox" name="auto-enroll" value="Auto-Enroll" checked="yes">
    <label for="auto-enroll">${_("Auto Enroll")}</label>
    <div class="hint auto-enroll-hint">
      <span class="hint-caret"></span>
      <p>
	${_("If this option is <em>checked</em>, users who have not yet registered for {platform_name} will be automatically enrolled.").format(platform_name=settings.PLATFORM_NAME)}
	${_("If this option is left <em>unchecked</em>, users who have not yet registered for {platform_name} will not be enrolled, but will be allowed to enroll once they make an account.").format(platform_name=settings.PLATFORM_NAME)}
	<br /><br />
	${_("Checking this box has no effect if 'Unenroll' is selected.")}
      </p>
    </div>
  </div>

  <div class="enroll-option">
    <input type="checkbox" name="email-students" value="Notify-students-by-email" checked="yes">
    <label for="email-students">${_("Notify users by email")}</label>
    <div class="hint email-students-hint">
      <span class="hint-caret"></span>
      <p>
	${_("If this option is <em>checked</em>, users will receive an email notification.")}
      </p>
    </div>
  </div>

  <div>
    <input type="button" name="enrollment-button" class="enrollment-button" value="${_("Enroll")}" data-endpoint="${ section_data['enroll_button_url'] }" data-action="enroll" >
    <input type="button" name="enrollment-button" class="enrollment-button" value="${_("Unenroll")}" data-endpoint="${ section_data['unenroll_button_url'] }" data-action="unenroll" >
  </div>
  <div class="request-response"></div>
  <div class="request-response-error"></div>
</div>

<hr class="divider" />

%if section_data['access']['instructor']:
<div class="batch-beta-testers membership-section">
  <h2> ${_("Batch Beta Tester Addition")} </h2>
  <p>
    <label for="student-ids-for-beta">
      ${_("Enter email addresses and/or usernames separated by new lines or commas.")}<br/>
      ${_("Note: Users must have an activated {platform_name} account before they can be enrolled as a beta tester.").format(platform_name=settings.PLATFORM_NAME)}
    </label>

  <textarea rows="6" cols="50" name="student-ids-for-beta" placeholder="${_("Email Addresses/Usernames")}" spellcheck="false"></textarea>
  </p>

  <div class="enroll-option">
    <input type="checkbox" name="auto-enroll" value="Auto-Enroll" checked="yes">
    <label for="auto-enroll-beta">${_("Auto Enroll")}</label>
    <div class="hint auto-enroll-beta-hint">
      <span class="hint-caret"></span>
      <p>
	${_("If this option is <em>checked</em>, users who have not enrolled in your course will be automatically enrolled.")}
	<br /><br />
	${_("Checking this box has no effect if 'Remove beta testers' is selected.")}
      </p>
    </div>
  </div>

  <div class="enroll-option">
    <input type="checkbox" name="email-students-beta" value="Notify-students-by-email" checked="yes">
    <label for="email-students-beta">${_("Notify users by email")}</label>
    <div class="hint email-students-beta-hint">
      <span class="hint-caret"></span>
      <p> ${_("If this option is <em>checked</em>, users will receive an email notification.")}</p>
    </div>
  </div>

  <div>
    <input type="button" name="beta-testers" class="enrollment-button" value="${_("Add beta testers")}" data-endpoint="${ section_data['modify_beta_testers_button_url'] }" data-action="add" >
    <input type="button" name="beta-testers" class="enrollment-button" value="${_("Remove beta testers")}" data-endpoint="${ section_data['modify_beta_testers_button_url'] }" data-action="remove" >
  </div>

  <div class="request-response"></div>
  <div class="request-response-error"></div>
</div>

<hr class="divider" />
%endif

<div class="member-lists-management membership-section">
  ## Translators: an "Administration List" is a list, such as Course Staff, that users can be added to.
  <h2> ${_("Administration List Management")} </h2>

  <div class="request-response-error"></div>

  <div class="wrapper-member-select">
    ## Translators: an "Administrator Group" is a group, such as Course Staff, that users can be added to.
    <label for="member-lists-selector">${_("Select an Administrator Group:")}</label>
    <select id="member-lists-selector" class="member-lists-selector">
      <option> ${_("Getting available lists...")} </option>
    </select>

  </div>


  %if not section_data['access']['instructor']:
    <p>
      ${_("Staff cannot modify staff or beta tester lists. To modify these lists, "
      "contact your instructor and ask them to add you as an instructor for staff "
      "and beta lists, or a discussion admin for discussion management.")}
    </p>
  %endif

  %if section_data['access']['instructor']:
    <div class="auth-list-container"
      data-rolename="staff"
      data-display-name="${_("Course Staff")}"
      data-info-text="
        ${_("Course staff can help you manage limited aspects of your course. Staff "
        "can enroll and unenroll students, as well as modify their grades and "
        "see all course data. Course staff are not automatically given access "
        "to Studio and will not be able to edit your course.")}"
      data-list-endpoint="${ section_data['list_course_role_members_url'] }"
      data-modify-endpoint="${ section_data['modify_access_url'] }"
      data-add-button-label="${_("Add Staff")}"
    ></div>

    <div class="auth-list-container"
      data-rolename="instructor"
      data-display-name="${_("Instructors")}"
      data-info-text="
        ${_("Instructors are the core administration of your course. Instructors can "
        "add and remove course staff, as well as administer discussion access.")}"
      data-list-endpoint="${ section_data['list_course_role_members_url'] }"
      data-modify-endpoint="${ section_data['modify_access_url'] }"
      data-add-button-label="${_("Add Instructor")}"
    ></div>

    <div class="auth-list-container"
      data-rolename="beta"
      data-display-name="${_("Beta Testers")}"
      data-info-text="
        ${_("Beta testers can see course content before the rest of the students. "
        "They can make sure that the content works, but have no additional "
        "privileges.")}"
      data-list-endpoint="${ section_data['list_course_role_members_url'] }"
      data-modify-endpoint="${ section_data['modify_access_url'] }"
      data-add-button-label="${_("Add Beta Tester")}"
    ></div>

    <div class="auth-list-container"
      data-rolename="Administrator"
      data-display-name="${_("Discussion Admins")}"
      data-info-text="
        ${_("Discussion admins can edit or delete any post, clear misuse flags, close "
         "and re-open threads, endorse responses, and see posts from all cohorts. "
         "They CAN add/delete other moderators and their posts are marked as 'staff'.")}"
      data-list-endpoint="${ section_data['list_forum_members_url'] }"
      data-modify-endpoint="${ section_data['update_forum_role_membership_url'] }"
      data-add-button-label="${_("Add Discussion Admin")}"
    ></div>
  %endif

  %if section_data['access']['instructor'] or section_data['access']['forum_admin']:
    <div class="auth-list-container"
      data-rolename="Moderator"
      data-display-name="${_("Discussion Moderators")}"
      data-info-text="
        ${_("Discussion moderators can edit or delete any post, clear misuse flags, close "
         "and re-open threads, endorse responses, and see posts from all cohorts. "
         "They CANNOT add/delete other moderators and their posts are marked as 'staff'.")}"
      data-list-endpoint="${ section_data['list_forum_members_url'] }"
      data-modify-endpoint="${ section_data['update_forum_role_membership_url'] }"
      data-add-button-label="${_("Add Moderator")}"
    ></div>

    <div class="auth-list-container"
      data-rolename="Community TA"
      data-display-name="${_("Discussion Community TAs")}"
      data-info-text="
        ${_("Community TA's are members of the community whom you deem particularly "
        "helpful on the discussion boards. They can edit or delete any post, clear misuse flags, "
        "close and re-open threads, endorse responses, and see posts from all cohorts. "
        "Their posts are marked 'Community TA'.")}"
      data-list-endpoint="${ section_data['list_forum_members_url'] }"
      data-modify-endpoint="${ section_data['update_forum_role_membership_url'] }"
      data-add-button-label="${_("Add Community TA")}"
    ></div>
  %endif
</div>

<hr class="divider" />

<div class="cohort-management membership-section">
  <h2 class="section-title">
    <span class="value">${_("Cohort Management")}</span>
    <span class="description">${_("Cohorts are such and such and are used for this and that to do all the things")}</span>
  </h2>

  <!-- nav -->
  <div class="cohort-management-nav">
    <form action="" method="post" name="" id="cohort-management-nav-form" class="cohort-management-nav-form">

      <div class="cohort-management-nav-form-select field field-select">
        <label for="cohort-select" class="label sr">${_("Select a cohort to manage")}</label>

        <select class="input cohort-select" name="cohort-select" id="cohort-select">
          <option value="cohort-name-1">Cohort Name is Placed Here and Should Accommodate Almost Everything (12,546)</option>
          <option value="cohort-name-2" selected>Cras mattis consectetur purus sit amet fermentum (8,546)</option>
          <option value="cohort-name-3">Donec id elit non mi porta gravida at eget metus. (4)
    </option>
          <option value="cohort-name-4">Donec id elit non mi porta gravida at eget metus. (4)
    </option>
        </select>
      </div>

      <button class="form-submit button action-primary action-view sr">${_("View cohort group")}</button>
    </form>
  </div>

  <!-- message - error - no groups -->
  <div class="message message-warning is-shown">
   <h3 class="message-title">${_("You currently have no cohort groups configured")}</h3>

   <div class="message-copy">
     <p>${_("Please complete your cohort group configuration by creating groups within Studio")}</p>
   </div>

   <div class="message-actions">
    <a href="" class="action-primary action-review">${_("Revise Configuration in Studio")}</a>
   </div>
  </div>

  <!-- message - error - bad configuration -->
  <div class="message message-error is-shown">
   <h3 class="message-title">${_("There's currently an error with your cohorts configuration within this course.")}</h3>

   <div class="message-copy">
     <p>${_("Error output (if any and near-human legible/comprehendable can be displayed here)")}</p>
   </div>

   <div class="message-actions">
    <a href="" class="action-primary action-review">${_("Review Configuration in Studio")}</a>
   </div>
  </div>

  <!-- individual group -->
  <div class="cohort-management-group">
    <header class="cohort-management-group-header">
      <h3 class="group-header-title">
        <span class="title-value">${_("Cohort Name Can be Placed Here and Should Accommodate Almost Everything")}</span>
        <span class="group-count">${_("(contains 12,546 Students)")}</span>
      </h3>

      <div class="cohort-management-group-setup">
        <h4 class="sr">${_("This cohort group's current management set up:")}</h4>
        <div class="setup-value">
          ${_("Students are added to this group automatically")}
          <a href="" class="incontext-help action-secondary action-help">${_("What does this mean?")}</a>
        </div>

        <div class="setup-actions">
          <a href="" class="action-secondary action-edit">${_("Edit settings in Studio")}</a>
        </div>
      </div>
    </header>

    <!-- individual group - form -->
    <div class="cohort-management-group-add">
      <form action="" method="post" name="" id="cohort-management-group-add-form" class="cohort-management-group-add-form">

        <h4 class="form-title">${_("Add students to this cohort group")}</h4>

        <div class="form-introduction">
          <p>${_("Please Note: Adding a student to this group will remove them from any groups they are currently  a part of.")}</p>
        </div>

        <!-- individual group - form message - confirmation -->
        <div class="message message-confirmation is-shown">
          <h3 class="message-title">${_("2,546 students have been added to this cohort group")}</h3>

          <div class="message-copy">
            <ul class="list-summary summary-items">
              <li class="summary-item">${_("1,245 were removed from Cohort Name is Placed Here and Should Accommodate Almost Everything")}</li>
              <li class="summary-item">${_("1,245 were removed from Cohort Name is Placed Here and Should Accommodate Almost Everything")}</li>
              <li class="summary-item">${_("1,245 were removed from Cohort Name is Placed Here and Should Accommodate Almost Everything")}</li>
            </ul>
          </div>
        </div>

        <!-- individual group - form message - error (collapsed) -->
        <div class="message message-error is-shown">
          <h3 class="message-title">${_("There were 25 errors when trying to add students:")}</h3>

          <div class="message-copy">
            <ul class="list-summary summary-items">
              <li class="summary-item">${_("Unknown user:")} ahgaeubgoq</li>
              <li class="summary-item">${_("Unknown user:")} hagaihga</li>
              <li class="summary-item">${_("Unknown user:")} ahgaeubgoq</li>
              <li class="summary-item">${_("Unknown user:")} ahgaeubgoq</li>
              <li class="summary-item">${_("Unknown user:")} hagaihga</li>
            </ul>
          </div>

         <div class="message-actions">
          <a href="" class="action-primary action-expand">${_("View all errors")}</a>
         </div>
        </div>

        <div class="form-fields">
          <div class="field field-textarea is-required">
            <label for="cohort-management-group-add-students" class="label">${_("Student ID or Email Address of Students to be added (one per line or comma-separated)")}</label>

            <textarea name="cohort-management-group-add-students" id="cohort-management-group-add-students" class="input cohort-management-group-add-students" placeholder="e.g. johndoe@example.com, JaneDoe, joeydoe@example.com"></textarea>
          </div>
        </div>

        <button class="form-submit button action-primary action-view">
          <i class="button-icon icon icon-plus"></i> ${_("Add Students")}
        </button>
      </form>
    </div>
  </div>

  <!-- cta - view download -->
  <div class="cohort-management-supplemental">
    <p class=""><i class="icon icon-info-sign"></i> You may view individual student information for each cohort via your entire course profile data download on <a href="" class="link-cross-reference">the data download view</a></p>
  </div>
</div>
