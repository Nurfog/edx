<%inherit file="base.html" />
<%def name="online_help_token()"><% return "video" %></%def>
<%!
  import json
  from django.core.serializers.json import DjangoJSONEncoder
  from django.utils.translation import ugettext as _
%>
<%block name="title">${_("Video Uploads")}</%block>
<%block name="bodyclass">is-signedin course view-uploads view-video-uploads</%block>

<%namespace name='static' file='static_content.html'/>

<%block name="header_extras">
% for template_name in ["active-video-upload-list", "active-video-upload", "previous-video-upload-list", "previous-video-upload"]:
<script type="text/template" id="${template_name}-tpl">
    <%static:include path="js/${template_name}.underscore" />
</script>
% endfor
</%block>

<%block name="requirejs">
    require(["js/factories/videos_index"], function (VideosIndexFactory) {
        "use strict";
        var $contentWrapper = $(".content-primary");
        VideosIndexFactory(
            $contentWrapper,
            "${post_url}",
            "${encodings_download_url}",
            ${concurrent_upload_limit},
            $(".nav-actions .upload-button"),
            $contentWrapper.data("previous-uploads")
        );
    });
</%block>

<%block name="content">

<div class="wrapper-mast wrapper">
    <header class="mast has-actions has-subtitle">
        <h1 class="page-header">
            <small class="subtitle">${_("Content")}</small>
            <span class="sr">&gt; </span>${_("Video Uploads")}
        </h1>

        <nav class="nav-actions" aria-label="${_('Page Actions')}">
            <h3 class="sr">${_("Page Actions")}</h3>
            <ul>
                <li class="nav-item">
                    <a href="#" class="button upload-button new-button"><i class="icon fa fa-plus"></i> ${_("Upload New File")}</a>
                </li>
            </ul>
        </nav>
    </header>
</div>

<div class="wrapper-content wrapper">
    <section class="content">
        <article class="content-primary" role="main" data-previous-uploads="${json.dumps(previous_uploads, cls=DjangoJSONEncoder) | h}"></article>

        <aside class="content-supplementary" role="complementary">
            <div class="bit">
                <h3 class="title-3">${_("Why upload video files?")}</h3>
                <p>${_("For a video to play on different devices, it needs to be available in multiple formats. After you upload an original video file in .mp4 or .mov format on this page, an automated process creates those additional formats and stores them on external video host sites for you.")}</p>
                <h3 class="title-3">${_("Monitoring files as they upload")}</h3>
                <p>${_("Each video file that you upload needs to successfully reach the edX video processing servers before additional work can begin. You can monitor the progress of files as they upload, and try again if the upload fails.")}</p>
                <h3 class="title-3">${_("Managing uploaded files")}</h3>
                <p>${_("After a file successfully uploads to edX, automated processing, which takes {em_start}24 hours{em_end}, begins at edX and the file appears under Previous Uploads as {em_start}In Progress{em_end}. EdX assigns a unique video ID to each file as soon as possible so that you can add the videos to your course while other processing continues. After edX assigns a unique video ID to a file, its status on this page changes to  {em_start}Complete{em_end}. However, the external video host sites continue to process the files.").format(em_start='<strong>', em_end="</strong>")}</p>
                <p>${_("{em_start}Important{em_end}: Processing by the external video host sites continues even after you see the {em_start}Complete{em_end} status on this page. It takes {em_start}24 hours{em_end} for your YouTube channel to list an uploaded video.").format(em_start='<strong>', em_end="</strong>")}</p>
                <p>${_("The file statuses on this page refresh periodically. If something goes wrong, the file status changes to {em_start}Failed{em_end}. Check for problems in your original file and upload a replacement.").format(em_start='<strong>', em_end="</strong>")}</p>
                <h3 class="title-3">${_("How do I get the videos into my course?")}</h3>
                <p>${_("As soon as edX assigns a unique video ID to a file, you can add that video to a video component in your course. Copy the unique video ID. In another browser window, on the Course Outline page, create or locate a video component to play this video. Edit the video component and paste the ID into the Advanced {em_start}EdX Video ID{em_end} field. The video plays in the LMS as soon as an encoded file is available at either of the video host sites. You do not have to wait until all encoded files are available on both host sites.").format(em_start='<strong>', em_end="</strong>")}</p>
            </div>
        </aside>
    </section>
</div>

</%block>
